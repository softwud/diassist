<!DOCTYPE html>
<html>
	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
		<meta name="format-detection" content="telephone=no" />
		<!--<meta name="viewport" content="user-scalable=no, initial-scale=1, maximum-scale=1, minimum-scale=1, width=device-width, height=device-height, target-densitydpi=device-dpi" />-->
		<link rel="stylesheet" type="text/css" href="css/index.css" />
		<title>DIassist</title>
		<style>
		nav
		{
/*			position: absolute;
			left: 0px;
			bottom: 0px;*/
			width: 100%;
			height: 40px;
			background-color: #000;
		}

		nav div
		{
			text-align: ceter;
			line-height: 40px;
			float: left;
			width: 25%;
			background-color: red;
		}
		a.active
		{
			font-weight: bold;
		}
		</style>
		<script src="phonegap.js"></script>
		<script type="text/javascript" src="js/jquery-1.9.1.js"></script>
		<script type="text/javascript" src="js/handlebars-1.0.0-rc.3.js"></script>
		<script type="text/javascript" src="js/ember-1.0.0-rc.1.js"></script>
		<script type="text/javascript" src="js/ember-data.js"></script>
<script type="text/javascript" src="js/localstorage_adapter.js"></script>
				<script type="text/javascript" src="js/index.js"></script>
	</head>
	<body>
		<div class="spinner hide"></div>
		<!--
		/**
		 *  Index Template
		 */-->
		<script type="text/x-handlebars">
			<header>
				<nav>
					<div>{{#linkTo 'settings'}}Settings{{/linkTo}}</div>
					<div>{{#linkTo 'medications'}}Medications{{/linkTo}}</div>
					<div>{{#linkTo 'diary'}}Diary{{/linkTo}}</div>
					<div>{{#linkTo 'analysis'}}Analysis{{/linkTo}}</div>
				</nav>
			</header>
			{{outlet}}
		</script>

		<!--
		/**
		 *  Settings Template
		 */
		 -->
		<script id="settings" type="text/x-handlebars">
			<h1>Settings</h1>
			{{outlet}}
		</script>

		<!--
		/**
		 *  Diary Template
		 */
		 -->
		<script id="diary" type="text/x-handlebars">
			<h1>Diary</h1>
			<table width="100%" cellpadding="0" cell spacing="0" border="1">
				<tr>
					<th>When</th>
					<th>What</th><th>Details</th><th>Notes</th>
				</tr>
				
				{{#each model}}
				<tr>
					<td>{{date}}</td><td>{{type}}</td><td>{{fulldetails}}</td><td>{{notes}}</td>
				</tr>
			{{/each}}
			</table>
		</script>

		<!--
		/**
		 *  Medications Template
		 */
		 -->
		<script id="medications" type="text/x-handlebars">
			<!--<h1>Medications</h1>-->
			<button {{action 'new'}}>New</button>
			<table width="100%" cellpadding="0" cell spacing="0" border="1">
				{{#if editing}}
				<tr>
					{{partial medication-edit}}
				</tr>
				{{/if}}
				<tr>
					<th>Name</th><th>Dosage</th><th>Units</th><th>Notes</th><th></th>
				</tr>
				{{#each medication in content}}
					{{partial medication-display}}
				{{/each}}
			</table>
		</script>

<!--		<script id="medication" type="text/x-handlebars">
				<tr>
					{{partial display}}
				</tr>
		</script>-->

		<script id="medication-display" type="text/x-handlebars">
				<tr>
					<td>{{medication.name}}</td>
					<td>{{medication.dosage}}</td>
					<td>{{medication.units}}</td>
					<td>{{medication.notes}}</td>
					<td><button {{action edit medication}}>Edit</button><button {{action delete medication}}>Delete</button></td>
				</tr>
		</script>

		<script id="medication-edit" type="text/x-handlebars">
				<tr>
					<td>{{view Ember.TextField valueBinding='editing.name'}}</td>
					<td>{{view Ember.TextField valueBinding='editing.dosage'}}</td>
					<td>{{view Ember.TextField valueBinding='editing.units'}}</td>
					<td>{{view Ember.TextArea valueBinding='editing.notes'}}</td>
					<td><button {{action doneEditing editing}}>Done</button></td>
				</tr>
		</script>

		<!--
		/**
		 *  Analysis Template
		 */
		 -->
		<script id="analysis" type="text/x-handlebars">
			<h1>Analysis</h1>
			{{outlet}}
		</script>
	</body>
</html>